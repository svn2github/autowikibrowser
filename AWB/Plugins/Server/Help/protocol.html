<!--?xml version="1.0" encoding="ISO-8859-1" ?>
<?xml-stylesheet href="res/xhtml-toc.xsl" version="1.0" type="text/xsl"?-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<head>
	<title>AWB Server Protocol</title>
	<meta name="copyright" content="© 2008 Stephen Kennedy" />
	<link rel="stylesheet" type="text/css" href="res/style.css" />
</head>
<body>
<p>This document details the protocol implemented by the <a href="main.html">AWB Server plugin</a>. Some proof-of-concept clients are also included in the AWB repository; patches and entirely new clients are <a href="http://en.wikipedia.org/wiki/Wikipedia_talk:AutoWikiBrowser/Dev">warmly welcomed</a>.</p>
<p>This document was prepared on 10 May 2008 and covers protocol version 0.1.</p>

<h1><a name="Handshake">Handshake</a></h1>
<p>Upon receiving a connection the server replies <a href="#HELLO" class="prot">200 HELLO</a> if it is able to accept a connection or <a href="#BUSY" class="prot">500 BUSY</a> if not (only one authenticated client connection is allowed at a time in order to keep things simple).</p> This is followed by a <a href="#REQUIRE" class="prot">201 REQUIRE CLIENT</a> challenge; the client <i>must</i> respond by sending <a href="#CLIENT" class="prot">CLIENT</a> and <a href="#VERSION" class="prot">VERSION</a> commands.
<p>If authentication and/or encryption is required, the server will also send one or more <a href="#REQUIRE" class="prot">201 REQUIRE</a> challenges.</p>
<p>Following the handshake, and authentication/encryption if required by the user, the server sends <span class="prot"><a href="#OK">250 OK</a> AutoWikiBrowser/&lt;AWB version&gt;/&lt;Server software&gt;/&lt;Server version&gt;</span>.</p>

<h2>Example transcript</h2>
<!-- use a show/hide div -->
<p>&gt; 500 BUSY
<br/>&lt; FORCE LOGIN
<br/>&gt; 200 HELLO
<br/>&lt; HELLO
<br/>&gt; 201 REQUIRE CLIENT
<br/>&lt; CLIENT AWB Windows Mobile 6 Client
<br/>&gt; 250 OK
<br/>&lt; VERSION 1.0.0.0
<br/>&gt; 250 OK
<br/>&gt; 201 REQUIRE LOGIN
<br/>&lt; USER Fred
<br/>&gt; 250 OK
<br/>&lt; PASS &lt;password&gt;
<br/>&gt; 250 OK
<br/>&gt; 201 REQUIRE PROTOCOL
<br/>&lt; PROTOCOL 0.2
<br/>&gt; 250 OK
<br/>&lt; PROTOCOLTYPE SIMPLE
<br/>&gt; 260 PROTOCOL 0.1
<br/>&gt; 270 READY AutoWikiBrowser/5.0.0.0/AWB Server Plugin/1.0.0.0
<br/>&lt; WANT WIKI LANG BOTENABLED BOTMODE SETTINGS LISTLENGTH ACTIVE
<br/>&gt; 100 WIKI wikipedia
<br/>&gt; 101 LANG en
<br/>&gt; 109 SETTINGS F:\Documents\AWB\Default settings.xml
<br/>&gt; 110 ACTIVE YES
<br/>&gt; 120 LISTLENGTH 245
<br/>&gt; 140 BOTENABLED YES
<br/>&gt; 141 BOTMODE YES
<br/>&lt; UPDATEME CURRENT ACTIVE LISTLENGTH
<br/>&gt; 250 OK
<br/>&gt; 111 CURRENT Talk:Bob Dylan
<br/>&gt; 120 LISTLENGTH 244
<br/>&gt; 111 CURRENT Talk:Brian May
<br/>&gt; 120 LISTLENGTH 243
<br/>&lt; BYE
<br/>&gt; 260 See ya
</p>

<h1>Commands</h1>
<dl>
	<dt><a name="BYE" class="prot">BYE</a></dt>
	<dd>Tells the server to end the session.</dd>

	<dt><a name="OK" class="prot">FORCE</a></dt>
	<dd><span class="prot">FORCE LOGIN</span>: If (and only if) the server greeted the client with <a href="#BUSY" class="prot">500 BUSY</a>, the client may tell the server that it wishes to forceably login and disconnect the currently logged in user/session. <a href="#Handshake">Handshaking</a> will continue as normal.</dd>
</dl>

<h1>Server response codes</h1>
<dl>
	<dt class="awb"><a name="HELLO" class="prot">200 HELLO</a></dt>
	<dd>The server is ready to accept a connection. See "<a href="#Handshake">Handshake</a>" for more information.</dd>

	<dt><a name="REQUIRE" class="prot">201 REQUIRE</a></dt>
	<dd><span class="prot">REQUIRE CLIENT</span>:
	<br/><span class="prot">REQUIRE KEY</span>:
	<br/><span class="prot">REQUIRE LOGIN</span>:</dd>

	<dt><a name="OK" class="prot">250 OK</a></dt>
	<dd>The request or data sent by the client was received and processed by the server without error.</dd>

	<dt><a name="OK" class="prot">500 BUSY</a></dt>
	<dd>A user is already logged into the server. To force their disconnection the client may send a <a href="#FORCE" class="prot">FORCE LOGIN</a> command. Otherwise, the client should end the connection by disconnecting or sending <a href="#FORCE" class="prot">BYE</a>.</dd>

	<dt><a name="501" class="prot">501 &lt;reason&gt;</a></dt>
	<dd>The command failed or could not be accepted because of &lt;reason&gt;.</dd>
</dl>

<h1>Ending the session</h1>
<p>The client may simply disconnect by closing the TCP/IP connection although it is preferred for the client to send <a href="#FORCE" class="prot">BYE</a>.</p>

<hr />
<p><small>© 2008, <a href="http://www.sdk-software.com/" target="_blank">Stephen Kennedy</a>/AWB team</small></p>
<p>
	<img style="border:0;width:44px;height:16px"
		src="http://jigsaw.w3.org/css-validator/images/vcss"
		alt="Valid CSS!" />
    <img
		src="http://www.w3.org/Icons/valid-xhtml10"
		alt="Valid XHTML 1.0 Transitional" height="16" width="44" />

</p>
</body>
</html>